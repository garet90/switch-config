vlan:
  wan:
    id: 2
    ip: 10.211.2.254/24 # .1 is the actual gateway, set by OPNSense
  oob-mgmt:
    id: 3
    ip: 10.211.3.1/24
  vpn:
    id: 4
    ip: 10.211.4.1/24
  monitoring:
    id: 5
    ip: 10.211.5.1/24
  proxmox:
    id: 6
    ip: 10.211.6.1/24
  internal-svcs:
    id: 7
    ip: 10.211.7.1/24
  development:
    id: 8
    ip: 10.211.8.1/24
acl:
  - [ # so external vpn can access all components (access control is handled by cloudflare zero trust)
      {vlan: vpn},
      all-vlan
    ]
  - [ # so prometheus can scrape all components
      {vlan: monitoring},
      all-vlan
    ]
  - [ # so proxmox knows when to shut down by monitoring UPS
      {vlan: proxmox},
      {vlan: oob-mgmt}
    ]
  - [
      {vlan: development},
      {vlan: internal-svcs}
    ]
route:
  0.0.0.0/0: 10.211.2.1
interface:
  e101-001-0: # OPNSense 0 port
    vlan:
      untagged: wan
  e101-002-0: # OPNSense 1 port
    vlan:
      untagged: wan
  e101-003-0: # downlink to L2 switch
    vlan:
      untagged: oob-mgmt
      tagged: all
  e101-004-0: # downlink to L2 switch
    vlan:
      untagged: oob-mgmt
      tagged: all
  e101-005-0: # downlink to L2 switch
    vlan:
      untagged: oob-mgmt
      tagged: all
  e101-006-0: # downlink to L2 switch
    vlan:
      untagged: oob-mgmt
      tagged: all
  e101-049-0: # patricia proxmox
    vlan:
      untagged: proxmox
      tagged:
        - vpn
        - monitoring
        - proxmox
        - internal-svcs
        - development
  e101-017-0: # susan proxmox
    vlan:
      untagged: proxmox
      tagged:
        - vpn
        - monitoring
        - proxmox
        - internal-svcs
        - development
